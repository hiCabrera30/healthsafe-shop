(self.webpackChunk=self.webpackChunk||[]).push([[280],{4766:(t,e,n)=>{"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,{Z:()=>a});var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cartKey="healthsafe_cart"}var e,n,a;return e=t,(n=[{key:"initialize",value:function(){var t=this.getCartData();localStorage.setItem(this.cartKey,t)}},{key:"getCartData",value:function(){return JSON.parse(localStorage.getItem(this.cartKey)||[])}},{key:"setCartData",value:function(t){localStorage.setItem(this.cartKey,JSON.stringify(t))}},{key:"addProduct",value:function(t,e){var n=this.getCartData(),r=n.findIndex((function(e){return e.id==t}));r>=0?n[r].amount+=e:n.push({id:t,amount:e}),this.setCartData(n)}},{key:"setProductAmount",value:function(t,e){var n=this.getCartData(),r=n.findIndex((function(e){return e.id==t}));r>=0?n[r].amount=e:n.push({id:t,amount:e}),this.setCartData(n)}},{key:"removeProduct",value:function(t){var e=this.getCartData(),n=e.findIndex((function(e){return e.id==t}));n>=0&&e.splice(n,1),this.setCartData(e)}},{key:"getProductInCart",value:function(t){var e=this.getCartData(),n=e.findIndex((function(e){return e.id==t}));return n>=0?e[n]:null}},{key:"clear",value:function(){this.setCartData([])}}])&&r(e.prototype,n),a&&r(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}()},946:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t="object"===r(t)?route(t.name,t.params||{}):t,e?setTimeout((function(){return location.href=t}),e):location.href=t}n.d(e,{u:()=>a})},1952:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>h});var r=n(7757),a=n.n(r),i=n(9220),o=n(946),s=n(3846),u=n(4766),c=n(9158);const l={name:"CartListItem",components:{NumberInputSpinner:n.n(c)()},computed:{totalPrice:function(){return this.product.price*this.amount},displayedTotalPrice:function(){return"".concat(this.currencySign," ").concat(parseFloat(this.totalPrice).toFixed(2))}},data:function(){return{amount:this.product.amount}},methods:{initialize:function(){},amountChange:function(t){this.$emit("setamount",{id:this.product.id,amount:t})},removeFromCart:function(){this.$emit("remove",this.product.id)}},props:{product:Object,cart:Object,currencySign:String},mounted:function(){this.initialize()}};var p=n(1900);function d(t,e,n,r,a,i,o){try{var s=t[i](o),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,a)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){d(i,r,a,o,s,"next",t)}function s(t){d(i,r,a,o,s,"throw",t)}o(void 0)}))}}const m={name:"CartList",components:{CartListItem:(0,p.Z)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",{staticClass:"line-separated"},[n("td",[n("avatar-badge",{attrs:{size:{width:100,height:100},rounded:!1,src:t.product.image}})],1),t._v(" "),n("td",[n("link-button",{staticClass:"mb-2",attrs:{route:"pages.products.show",params:t.product.id}},[n("span",{staticClass:"text-default",domProps:{textContent:t._s(t.product.name)}})])],1),t._v(" "),n("td",{staticClass:"font-weight-bold text-center",domProps:{textContent:t._s(t.product.displayed_price)}}),t._v(" "),n("td",{staticClass:"text-center"},[n("div",{staticClass:"m-auto",staticStyle:{width:"150px"}},[n("number-input-spinner",{ref:"spinner",attrs:{min:1,max:t.product.stock,step:1,"button-class":"vnis__button bg-primary","integer-only":!0},on:{input:t.amountChange},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1)]),t._v(" "),n("td",{staticClass:"font-weight-bold text-center",domProps:{textContent:t._s(t.displayedTotalPrice)}}),t._v(" "),n("td",{staticClass:"text-center"},[n("button",{staticClass:"btn btn-primary",on:{click:t.removeFromCart}},[t._v("Remove from cart")])])])}),[],!1,null,null,null).exports},computed:{grandTotal:function(){return this.cartItems.map((function(t){return t.price*t.amount})).reduce((function(t,e){return t+e}),0)},displayedGrandTotal:function(){return"".concat(this.currencySign," ").concat(parseFloat(this.grandTotal).toFixed(2))}},data:function(){return{cart:new u.Z,cartItems:[]}},methods:{initialize:function(){var t=this,e=this.cart.getCartData(),n={ids:JSON.stringify(e.map((function(t){return t.id}))),paginate:!1};(0,i.U2)(route("api.products.index"),{params:n}).then((function(e){return t.mapCartItems(e.data.result.products)})).catch((function(t){return(0,s.R6)("Unable to fetch cart data. Please reload page.")}))},mapCartItems:function(t){var e=this;this.cartItems=t.map((function(t){var n=e.cart.getProductInCart(t.id).amount;return t.amount=n>t.stock?t.stock:n,t})).filter((function(t){return t.amount>0})),this.cart.setCartData(this.cartItems)},updateProductAmount:function(t){this.cart.setProductAmount(t.id,t.amount)},removeProduct:function(t){var e=this;return f(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,s.iG)("Are you sure you want to remove this item from cart?","");case 2:if(n.sent.value){n.next=5;break}return n.abrupt("return");case 5:e.cart.removeProduct(t),r=e.cartItems.findIndex((function(e){return e.id==t})),e.cartItems.splice(r,1);case 8:case"end":return n.stop()}}),n)})))()},checkout:function(){var t=this;return f(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.iG)("Are you sure you want to check out your cart?","");case 2:if(e.sent.value){e.next=5;break}return e.abrupt("return");case 5:n={items:t.cartItems},(0,i.v_)(route("api.carts.checkout"),{data:n}).then(function(){var e=f(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.cart.clear(),e.next=3,(0,s.Ug)(n.data.message);case 3:(0,o.u)(route("pages.products.index"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){return(0,s.R6)(t.response.data.message)}));case 7:case"end":return e.stop()}}),e)})))()}},props:{currencySign:String},mounted:function(){this.initialize()}};const h=(0,p.Z)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("card",{staticClass:"mb-3"},[n("template",{slot:"body"},[n("table",{staticClass:"w-100"},[n("thead",[n("tr",[n("th"),t._v(" "),n("th",[t._v("Product name")]),t._v(" "),n("th",{staticClass:"text-center"},[t._v("Price")]),t._v(" "),n("th",{staticClass:"text-center"},[t._v("Quantity")]),t._v(" "),n("th",{staticClass:"text-center"},[t._v("Total")]),t._v(" "),n("th")])]),t._v(" "),n("tbody",[t._l(t.cartItems,(function(e){return n("cart-list-item",{key:e.id,tag:"tr",attrs:{product:e,"currency-sign":t.currencySign},on:{setamount:t.updateProductAmount,remove:t.removeProduct}})})),t._v(" "),0==t.cartItems.length?n("tr",[n("td",{attrs:{colspan:"6"}},[n("h2",{staticClass:"pb-5 pt-5 text-center text-muted"},[t._v("No items in cart")])])]):t._e()],2)]),t._v(" "),t.cartItems.length>0?n("div",{staticClass:"text-center p-3"},[n("h4",[t._v("Grand Total: "),n("span",{staticClass:"font-weight-bold",domProps:{textContent:t._s(t.displayedGrandTotal)}})]),t._v(" "),n("button",{staticClass:"btn btn-success btn-block",on:{click:t.checkout}},[t._v("Check out")])]):t._e()])],2)}),[],!1,null,null,null).exports},9158:function(t){t.exports=function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=6)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"NumberInputSpinner",data:function(){return{numericValue:this.value,timer:null}},props:{value:{type:Number,default:0},min:{default:0,type:Number},max:{default:10,type:Number},step:{default:1,type:Number},mouseDownSpeed:{default:100,type:Number},inputClass:{default:"vnis__input",type:String},buttonClass:{default:"vnis__button",type:String},integerOnly:{default:!1,type:Boolean}},methods:{clearTimer:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},whileMouseDown:function(t){null===this.timer&&(this.timer=setInterval((function(){t()}),this.mouseDownSpeed))},increaseNumber:function(){this.numericValue+=this.step},decreaseNumber:function(){this.numericValue-=this.step},isInteger:function(t){var e=(t=t||window.event).keyCode||t.which;e=String.fromCharCode(e),/[0-9]/.test(e)||(t.returnValue=!1,t.preventDefault&&t.preventDefault())},isNumber:function(t){var e=(t=t||window.event).which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)&&46!==e))return!0;t.preventDefault()},validateInput:function(t){!0===this.integerOnly?this.isInteger(t):this.isNumber(t)},inputValue:function(t){this.numericValue=t.target.value?parseInt(t.target.value):this.min}},watch:{numericValue:function(t,e){t<=this.min&&(this.numericValue=parseInt(this.min)),t>=this.max&&(this.numericValue=parseInt(this.max)),t<=this.max&&t>=this.min&&this.$emit("input",t,e)}}}},function(t,e){t.exports=function(t,e,n,r,a){var i,o=t=t||{},s=typeof t.default;"object"!==s&&"function"!==s||(i=t,o=t.default);var u,c="function"==typeof o?o.options:o;if(e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns),r&&(c._scopeId=r),a?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):n&&(u=n),u){var l=c.functional,p=l?c.render:c.beforeCreate;l?c.render=function(t,e){return u.call(e),p(t,e)}:c.beforeCreate=p?[].concat(p,u):[u]}return{esModule:i,exports:o,options:c}}},function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vnis"},[n("button",{class:t.buttonClass,on:{click:t.decreaseNumber,mousedown:function(e){t.whileMouseDown(t.decreaseNumber)},mouseup:t.clearTimer}},[t._v("-")]),t._v(" "),n("input",{class:t.inputClass,attrs:{type:"number",min:t.min,max:t.max,debounce:"500"},domProps:{value:t.numericValue},on:{keypress:t.validateInput,input:t.inputValue}}),t._v(" "),n("button",{class:t.buttonClass,on:{click:t.increaseNumber,mousedown:function(e){t.whileMouseDown(t.increaseNumber)},mouseup:t.clearTimer}},[t._v("+")])])},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e,n){var r=n(4);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals),n(7)("38ce7148",r,!1)},function(t,e,n){(t.exports=n(5)(void 0)).push([t.i,"\n.vnis *,\n.vnis *::after,\n.vnis *::before {\n  box-sizing: border-box;\n}\n.vnis__input {\n  -webkit-appearance: none;\n  border: 1px solid #ebebeb;\n  float: left;\n  font-size: 16px;\n  height: 40px;\n  margin: 0;\n  outline: none;\n  text-align: center;\n  width: calc(100% - 80px);\n}\n.vnis__input::-webkit-outer-spin-button, .vnis__input::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n}\n.vnis__button {\n  -webkit-appearance: none;\n  transition: background 0.5s ease;\n  background: #387e90;\n  border: 0;\n  color: #fff;\n  cursor: pointer;\n  float: left;\n  font-size: 20px;\n  height: 40px;\n  margin: 0;\n  width: 40px;\n}\n.vnis__button:hover {\n    background: #469eb5;\n}\n.vnis__button:focus {\n    outline: 1px dashed #69b2c5;\n    outline-offset: -5px;\n}\n",""])},function(t,e){function n(t,e){var n=t[1]||"",a=t[3];if(!a)return n;if(e&&"function"==typeof btoa){var i=r(a);return[n].concat(a.sources.map((function(t){return"/*# sourceURL="+a.sourceRoot+t+" */"}))).concat([i]).join("\n")}return[n].join("\n")}function r(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=n(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},a=0;a<this.length;a++){var i=this[a][0];"number"==typeof i&&(r[i]=!0)}for(a=0;a<t.length;a++){var o=t[a];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},function(t,e,n){function r(t){a||n(3)}var a=!1,i=n(1)(n(0),n(2),r,null,null);i.options.__file="/Users/krystalcampioni/repos/vue-number-input-spinner/src/components/NumberInputSpinner.vue",i.esModule&&Object.keys(i.esModule).some((function(t){return"default"!==t&&"__"!==t.substr(0,2)})),i.options.functional,t.exports=i.exports},function(t,e,n){function r(t){for(var e=0;e<t.length;e++){var n=t[e],r=l[n.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](n.parts[a]);for(;a<n.parts.length;a++)r.parts.push(i(n.parts[a]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var o=[];for(a=0;a<n.parts.length;a++)o.push(i(n.parts[a]));l[n.id]={id:n.id,refs:1,parts:o}}}}function a(){var t=document.createElement("style");return t.type="text/css",p.appendChild(t),t}function i(t){var e,n,r=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(r){if(m)return h;r.parentNode.removeChild(r)}if(v){var i=f++;r=d||(d=a()),e=o.bind(null,r,i,!1),n=o.bind(null,r,i,!0)}else r=a(),e=s.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}function o(t,e,n,r){var a=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=b(e,a);else{var i=document.createTextNode(a),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(i,o[e]):t.appendChild(i)}}function s(t,e){var n=e.css,r=e.media,a=e.sourceMap;if(r&&t.setAttribute("media",r),a&&(n+="\n/*# sourceURL="+a.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var u="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!u)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c=n(8),l={},p=u&&(document.head||document.getElementsByTagName("head")[0]),d=null,f=0,m=!1,h=function(){},v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,n){m=n;var a=c(t,e);return r(a),function(e){for(var n=[],i=0;i<a.length;i++){var o=a[i];(s=l[o.id]).refs--,n.push(s)}for(e?r(a=c(t,e)):a=[],i=0;i<n.length;i++){var s;if(0===(s=n[i]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete l[s.id]}}}};var b=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t,e){for(var n=[],r={},a=0;a<e.length;a++){var i=e[a],o=i[0],s={id:t+":"+a,css:i[1],media:i[2],sourceMap:i[3]};r[o]?r[o].parts.push(s):n.push(r[o]={id:o,parts:[s]})}return n}}])}}]);